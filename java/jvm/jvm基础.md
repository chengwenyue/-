# JVM基础

JVM由以下几部分组成

1. 类加载子系统
2. 运行时数据区
3. 执行引擎
4. 垃圾回收器

## 1. 类加载子系统

Jvm加载一个类的流程如下：

加载-> 验证->准备 -> 解析-> 初始化 -> 使用



JVM 内存布局总体如下图：

![Java内存布局](https://p0.meituan.net/travelcube/132ba6ba720f2bfc6c69b1ce490f7c87693987.jpg)

## 1. 运行时数据



运行时数据包括，程序计数器，VMStack（虚拟机栈），堆，运行时常量池，方法区，本地方法栈。

运行时常量池包含来着字节码文件的常量池，符号引用和字面量，方法区包含方法和字段的代码，类似操作系统的代码段（code segment ）,存放方法的代码指令文本。

类加载之后，常量池的内容会进入运行时常量池，这时候里面的数据也许还保持着符号引用。

常量池有运行时常量池和String常量池。

​	运行时常量池包含类元信息，方法段等，字节码常量池等，存放在元空间中。

​	String常量池是jvm存放字符串的一个缓存池，由StringTable实现，StringTable的key是引用，value是堆中真实的字符串地址。返回给Java层的实际上是句柄引用，指向StringTable的key。

JDK1.8 静态变量存放在 Class对象中，而Class对象存放在堆中，静态变量也都存放在堆中。可参考如下博客：

https://blog.csdn.net/x_iya/article/details/81260154#comments

